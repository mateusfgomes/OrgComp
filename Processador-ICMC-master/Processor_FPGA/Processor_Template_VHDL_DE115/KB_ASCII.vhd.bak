LIBRARY IEEE;
USE  IEEE.STD_LOGIC_1164.all;
USE  IEEE.STD_LOGIC_ARITH.all;
USE  IEEE.STD_LOGIC_UNSIGNED.all;

ENTITY KB_ASCII IS
	PORT(
			CLK : IN STD_LOGIC;
			RST : IN STD_LOGIC;
			SCANCODE : IN STD_LOGIC_VECTOR(7 DOWNTO 0);
			SCANEXTENDED : IN STD_LOGIC;
			SCANPRESSING : IN STD_LOGIC;
			ASCII : OUT STD_LOGIC_VECTOR(7 DOWNTO 0);
			HALT_REQ : OUT STD_LOGIC;
			RESET_REQ : OUT STD_LOGIC
		);
END KB_ASCII;

ARCHITECTURE main OF KB_ASCII IS
SIGNAL CTRLpressed : STD_LOGIC;
BEGIN
	PROCESS(CLK, RST)
	BEGIN
		IF(RST = '1') THEN
			CTRLpressed <= '0';
			ASCII <= x"00";
			HALT_REQ <= '0';
			RESET_REQ <= '0';
		ELSIF(CLK'EVENT AND CLK = '1') THEN
			-- Tratar todas as teclas iniciais (ou unicas)
			CASE SCANCODE IS
				-- CTRL inicia combinacoes
				WHEN x"14"
					CTRLpressed <= '1';